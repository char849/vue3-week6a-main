(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-674253d5"],{"1dde":function(t,e,c){var a=c("d039"),n=c("b622"),o=c("2d00"),r=n("species");t.exports=function(t){return o>=51||!a((function(){var e=[],c=e.constructor={};return c[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"6be2":function(t,e,c){"use strict";var a=function(t){return{all:t=t||new Map,on:function(e,c){var a=t.get(e);a?a.push(c):t.set(e,[c])},off:function(e,c){var a=t.get(e);a&&(c?a.splice(a.indexOf(c)>>>0,1):t.set(e,[]))},emit:function(e,c){var a=t.get(e);a&&a.slice().map((function(t){t(c)})),(a=t.get("*"))&&a.slice().map((function(t){t(e,c)}))}}},n=a();e["a"]=n},8418:function(t,e,c){"use strict";var a=c("a04b"),n=c("9bf2"),o=c("5c6c");t.exports=function(t,e,c){var r=a(e);r in t?n.f(t,r,o(0,c)):t[r]=c}},"99af":function(t,e,c){"use strict";var a=c("23e7"),n=c("da84"),o=c("d039"),r=c("e8b5"),l=c("861d"),s=c("7b0b"),i=c("07fa"),u=c("8418"),d=c("65f0"),b=c("1dde"),h=c("b622"),f=c("2d00"),m=h("isConcatSpreadable"),j=9007199254740991,p="Maximum allowed index exceeded",O=n.TypeError,v=f>=51||!o((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),g=b("concat"),x=function(t){if(!l(t))return!1;var e=t[m];return void 0!==e?!!e:r(t)},y=!v||!g;a({target:"Array",proto:!0,forced:y},{concat:function(t){var e,c,a,n,o,r=s(this),l=d(r,0),b=0;for(e=-1,a=arguments.length;e<a;e++)if(o=-1===e?r:arguments[e],x(o)){if(n=i(o),b+n>j)throw O(p);for(c=0;c<n;c++,b++)c in o&&u(l,b,o[c])}else{if(b>=j)throw O(p);u(l,b++,o)}return l.length=b,l}})},b0c0:function(t,e,c){var a=c("83ab"),n=c("5e77").EXISTS,o=c("e330"),r=c("9bf2").f,l=Function.prototype,s=o(l.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=o(i.exec),d="name";a&&!n&&r(l,d,{configurable:!0,get:function(){try{return u(i,s(this))[1]}catch(t){return""}}})},cc55:function(t,e,c){"use strict";c.r(e);c("99af"),c("b0c0"),c("b64b");var a=c("7a23"),n={class:"container"},o=Object(a["h"])("h2",null,"購物車",-1),r={class:"row justify-content-center"},l={class:"col-md-6"},s={class:"text-end"},i=["disabled"],u={class:"table align-middle"},d=Object(a["h"])("thead",null,[Object(a["h"])("tr",null,[Object(a["h"])("th"),Object(a["h"])("th",null,"品名"),Object(a["h"])("th",{style:{width:"130px"}},"數量/單位"),Object(a["h"])("th"),Object(a["h"])("th",null,"單價")])],-1),b=["onClick","disabled"],h={key:0,class:"fas fa-spinner fa-pulse"},f=Object(a["i"])(" x "),m={class:"input-group input-group-sm"},j={class:"input-group mb-3"},p=["onUpdate:modelValue","onChange","disabled"],O=["value"],v={class:"input-group-text",id:"basic-addon2"},g=Object(a["h"])("td",null,null,-1),x={class:"text-end"},y=Object(a["h"])("td",{colspan:"4",class:"text-end"},"總計",-1),C={class:"text-end"},I={class:"my-5 row justify-content-center"},k={class:"mb-3"},V=Object(a["h"])("label",{for:"email",class:"form-label"},"Email",-1),w={class:"mb-3"},D=Object(a["h"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),L={class:"mb-3"},S=Object(a["h"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),q={class:"mb-3"},F=Object(a["h"])("label",{for:"address",class:"form-label"},"收件人地址",-1),U={class:"mb-3"},$=Object(a["h"])("label",{for:"message",class:"form-label"},"留言",-1),E={class:"text-end"},A=["disabled"];function M(t,e,c,M,_,J){var T=Object(a["F"])("Field"),B=Object(a["F"])("ErrorMessage"),P=Object(a["F"])("Form");return Object(a["x"])(),Object(a["g"])("div",n,[o,Object(a["h"])("div",r,[Object(a["h"])("div",l,[Object(a["h"])("div",s,[Object(a["h"])("button",{class:"btn btn-danger",type:"button",onClick:e[0]||(e[0]=function(){return J.delAllCarts&&J.delAllCarts.apply(J,arguments)}),disabled:0===_.cartData.carts.length}," 清空購物車 ",8,i)]),Object(a["h"])("table",u,[d,Object(a["h"])("tbody",null,[_.cartData.carts?(Object(a["x"])(!0),Object(a["g"])(a["a"],{key:0},Object(a["D"])(_.cartData.carts,(function(t){return Object(a["x"])(),Object(a["g"])("tr",{key:t.id},[Object(a["h"])("td",null,[Object(a["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return J.removeCartItem(t.id)},disabled:_.isLoadingItem===t.id},[_.isLoadingItem===t.id?(Object(a["x"])(),Object(a["g"])("i",h)):Object(a["f"])("",!0),f],8,b)]),Object(a["h"])("td",null,Object(a["I"])(t.product.title),1),Object(a["h"])("td",null,[Object(a["h"])("div",m,[Object(a["h"])("div",j,[Object(a["S"])(Object(a["h"])("select",{class:"form-select","onUpdate:modelValue":function(e){return t.qty=e},onChange:function(e){return J.updateCartItem(t)},disabled:_.isLoadingItem===t.id},[(Object(a["x"])(),Object(a["g"])(a["a"],null,Object(a["D"])(10,(function(e){return Object(a["h"])("option",{value:e,key:"".concat(e,"-").concat(t.id)},Object(a["I"])(e),9,O)})),64))],40,p),[[a["L"],t.qty]]),Object(a["h"])("span",v,Object(a["I"])(t.product.unit),1)])])]),g,Object(a["h"])("td",x,Object(a["I"])(t.total),1)])})),128)):Object(a["f"])("",!0)]),Object(a["h"])("tfoot",null,[Object(a["h"])("tr",null,[y,Object(a["h"])("td",C,Object(a["I"])(_.cartData.total),1)])])])])]),Object(a["h"])("div",I,[Object(a["j"])(P,{ref:"form",class:"col-md-6",onSubmit:J.createOrder},{default:Object(a["R"])((function(t){var c=t.errors;return[Object(a["h"])("div",k,[V,Object(a["j"])(T,{id:"email",name:"email",type:"email",class:Object(a["r"])(["form-control",{"is-invalid":c["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:_.form.user.email,"onUpdate:modelValue":e[1]||(e[1]=function(t){return _.form.user.email=t})},null,8,["class","modelValue"]),Object(a["j"])(B,{name:"email",class:"invalid-feedback"})]),Object(a["h"])("div",w,[D,Object(a["j"])(T,{id:"name",name:"姓名",type:"text",class:Object(a["r"])(["form-control",{"is-invalid":c["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:_.form.user.name,"onUpdate:modelValue":e[2]||(e[2]=function(t){return _.form.user.name=t})},null,8,["class","modelValue"]),Object(a["j"])(B,{name:"姓名",class:"invalid-feedback"})]),Object(a["h"])("div",L,[S,Object(a["j"])(T,{id:"tel",name:"電話",type:"text",class:Object(a["r"])(["form-control",{"is-invalid":c["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:_.form.user.tel,"onUpdate:modelValue":e[3]||(e[3]=function(t){return _.form.user.tel=t})},null,8,["class","modelValue"]),Object(a["j"])(B,{name:"電話",class:"invalid-feedback"})]),Object(a["h"])("div",q,[F,Object(a["j"])(T,{id:"address",name:"地址",type:"text",class:Object(a["r"])(["form-control",{"is-invalid":c["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:_.form.user.address,"onUpdate:modelValue":e[4]||(e[4]=function(t){return _.form.user.address=t})},null,8,["class","modelValue"]),Object(a["j"])(B,{name:"地址",class:"invalid-feedback"})]),Object(a["h"])("div",U,[$,Object(a["S"])(Object(a["h"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[5]||(e[5]=function(t){return _.form.message=t})},null,512),[[a["M"],_.form.message]])]),Object(a["h"])("div",E,[Object(a["h"])("button",{type:"submit",class:"btn btn-danger",disabled:Object.keys(c).length>0||0===_.cartData.carts.length}," 送出訂單 ",8,A)])]})),_:1},8,["onSubmit"])])])}var _=c("6be2"),J={data:function(){return{cartData:{carts:[]},form:{user:{name:"",email:"",tel:"",address:""},message:""},products:[],isLoadingItem:""}},methods:{getProducts:function(){var t=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("charlotte-hexschool","/products")).then((function(e){console.log(e),t.products=e.data.products}))},getCart:function(){var t=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("charlotte-hexschool","/cart")).then((function(e){console.log("cart:",e),t.cartData=e.data.data,_["a"].emit("get-cart")}))},removeCartItem:function(t){var e=this;this.isLoadingItem=t,this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("charlotte-hexschool","/cart/").concat(t)).then((function(t){console.log(t),e.getCart(),e.isLoadingItem="",_["a"].emit("get-cart")}))},updateCartItem:function(t){var e=this,c={product_id:t.product_id,qty:t.qty};this.isLoadingItem=t.id,this.$http.put("".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("charlotte-hexschool","/cart/").concat(t.id),{data:c}).then((function(t){console.log(t),e.getCart(),e.isLoadingItem=""}))},delAllCarts:function(){var t=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("charlotte-hexschool","/carts")).then((function(e){console.log(e),t.getCart(),_["a"].emit("get-cart")}))},createOrder:function(){var t=this,e=this.form;this.$http.post("".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("charlotte-hexschool","/order"),{data:e}).then((function(e){alert(e.data.message),t.$refs.form.resetForm(),t.getCart()}))}},mounted:function(){this.getCart()}},T=c("6b0d"),B=c.n(T);const P=B()(J,[["render",M]]);e["default"]=P}}]);
//# sourceMappingURL=chunk-674253d5.2f5857ec.js.map